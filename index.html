<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/styles.css" />
    <link
      rel="shorcut icon"
      href="latido-del-corazon.png"
      type="image/x-icon"
    />
    <title>Quemador de Calor√≠as</title>
  </head>

  <body>
    <main>
      <div class="wrapper">
        <details>
          <summary>‚≠êÔ∏è explicaci√≥n</summary>
          <p>
            El libro, Convert Anything to Calories, lleg√≥ a la conclusi√≥n de
            que, en promedio, una persona con un dedo indice de 10.8 cm^3 y de
            11.7 gramos necesitar√° muuuchos clicks para conservar la l√≠nea. Se
            requieren 16.7 micromoles de adenos√≠n trifosfato (la mol√©cula que
            transporta energ√≠a entre las c√©lulas) para mover un gramo del cuerpo
            por un segundo, y como hay 7.3 calor√≠as en un mol (la medida de
            cantidad de una sustancia) de adenos√≠n trifosfato, en teor√≠a, cada
            click del mouse deber√≠a quemar 1.42 calor√≠as. Aunque el c√°lculo
            asume el movimiento de todo el m√∫sculo, por lo que la cantidad real
            puede variar un poco.
          </p>
          <p>
            Pero resulta que es s√°bado y tienes hambre. treinta minutos despu√©s
            te llega una pizza (1,835kCal) con una coca (97kCal), tendr√≠as que
            hacer 1,360,563 clicks para quemar la cena. Y c√≥mo es s√°bado
            seguramente involucrar√° unas cuantas bebidas alcoh√≥licas: en un Gin
            & Tonic (120kCal) hay 84,507 clicks, y 131,690.14 por cada cerveza
            que consumas. En otras palabras, con 427 clicks en promedio por d√≠a,
            la computadora no es un buen ejercicio.
          </p>
        </details>
        <h1>Quemador de calor√≠as</h1>
        <div class="buttones" id="buttones">
          <div class="button" id="button">
            <p class="resultado">Calorias quemadas por click</p>
            <button id="burn" class="burn">üî•</button>
            <p class="result" id="result"></p>
          </div>
          <div class="button2" id="button2">
            <p class="resultado">Calorias de una pizza y una cocacola</p>
            <button id="burn2" class="burn2">üî•</button>
            <p class="result" id="result2"></p>
          </div>
        </div>
      </div>
    </main>

    <script>
      const createStore = (reducer, initialState) => {
        let state = initialState;
        let updater = () => {};
        const getState = () => state;

        const dispatch = (action) => {
          state = reducer(state, action);
          updater();
        };
        const subscribe = (listener) => {
          updater = listener;
        };
        return {
          getState,
          dispatch,
          subscribe,
        };
      };

      const reducer = (state, action) => {
        switch (action.type) {
          case "BURN":
            return state + 1.42;
          default:
            return state;
        }
      };
      const store = createStore(reducer, 0);
      // store.dispatch()
      // store.getState()
      // store.subscribe()

      store.subscribe(() => {
        // console.log('ha cambiado algo en el store', store.getState())
        window.result.textContent = `Haz quemado ${store.getState()} calor√≠as`;
      });

      const burn = () => {
        store.dispatch({
          type: "BURN",
          payload: 1.42,
        });
      };
      window.burn.addEventListener("click", burn);

      const createStore2 = (reducer2, initialState2) => {
        let state2 = initialState2;
        let updater2 = () => {};
        const getState2 = () => state2;

        const dispatch2 = (action2) => {
          state2 = reducer2(state2, action2);
          updater2();
        };
        const subscribe2 = (listener2) => {
          updater2 = listener2;
        };
        return {
          getState2,
          dispatch2,
          subscribe2,
        };
      };

      const reducer2 = (state2, action2) => {
        switch (action2.type) {
          case "BURN2":
            return state2 - 1.42;
          default:
            return state2;
        }
      };
      const store2 = createStore2(reducer2, 1360563);

      store2.subscribe2(() => {
        window.result2.textContent = `Te falta quemar ${store2.getState2()} calor√≠as`;
      });

      const burn2 = () => {
        store2.dispatch2({
          type: "BURN2",
          payload: 1.42,
        });
      };
      window.burn2.addEventListener("click", burn2);
    </script>
  </body>
</html>
